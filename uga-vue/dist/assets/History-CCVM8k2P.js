import{_ as H,u as q,r as c,x as M,a as h,o as G,w as b,c as y,b as f,d as w,e,f as s,E as J,k as E,j as K,y as Q,z as R,F as W,h as X,m as Y,n as Z,i as ee,q as C,p as te,t as ae,A as le}from"./index-D9tbxnKJ.js";/* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";const oe={class:"his-container"},se={class:"mainarea"},ne={class:"optionCourse"},re={class:"data"},ce={__name:"History",setup(ie){const i=q(),u=c(""),z=M(()=>_.filter(t=>!u.value||t.name.toLowerCase().includes(u.value.toLowerCase()))),r=c(""),x=h([]),_=h([]),m=h([]),n=c(1),k=c(12),p=c(0),P=c({学院:"college",班级:"stu_class",学号:"stu_no",姓名:"stu_name",题目一:"p1",题目二:"p2",题目三:"p3",题目四:"p4",题目五:"p5",题目六:"p6",总分:"total"}),T=(t,a)=>{console.log(t,a)},j=(t,a)=>{console.log(t,a)},d=async()=>{const t={pageSize:k.value,currentPage:n.value,course_id:r.value||0};i.getTestPaper(t)},V=t=>{n.value=t,d()},B=()=>{n.value>1&&(n.value--,d())},D=()=>{n.value<p.value&&(n.value++,d())},v=async()=>{const t={pageSize:999,currentPage:n.value,course_id:r.value||0},a=await R(t);m.length=0,Object.assign(m,a.data)};return G(()=>{r.value||d(),i.getCourse(),v()}),b(i.testPaperData,t=>{t.data.length!=0?(Object.assign(_,t.data),p.value=t.total_items):(_.length=0,p.value=0)}),b(r,t=>{i.getTestPaper({course_id:t}),v()}),b(i.courseList,t=>{Object.assign(x,t),v()}),(t,a)=>{const S=Z,N=J,U=E("Upload"),I=te,g=ee,L=E("vue3-json-excel"),l=ae,O=le,$=K,A=Q;return f(),y("div",oe,[w("div",se,[w("div",ne,[e(N,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),placeholder:"请选择课程",size:"large",style:{width:"25%"}},{default:s(()=>[(f(!0),y(W,null,X(x,o=>(f(),Y(S,{key:o.course_id,label:o.course_name,value:o.course_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(L,{"json-data":m,fields:P.value,name:"学生成绩表.xls"},{default:s(()=>[e(g,{type:"success",plain:"",size:"large"},{default:s(()=>[a[2]||(a[2]=C(" 导出数据")),e(I,{class:"el-icon--right"},{default:s(()=>[e(U)]),_:1})]),_:1})]),_:1},8,["json-data","fields"])]),w("div",re,[e($,{data:z.value,style:{width:"100%"},"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"}},{default:s(()=>[e(l,{label:"学院",prop:"college",width:"120%"}),e(l,{label:"班级",prop:"stu_class",width:"120%"}),e(l,{label:"学号",prop:"stu_no",width:"120%"}),e(l,{label:"姓名",prop:"stu_name",width:"120%"}),e(l,{label:"题目一",prop:"p1",width:"80%"}),e(l,{label:"题目二",prop:"p2",width:"80%"}),e(l,{label:"题目三",prop:"p3",width:"80%"}),e(l,{label:"题目四",prop:"p4",width:"80%"}),e(l,{label:"题目五",prop:"p5",width:"80%"}),e(l,{label:"题目六",prop:"p6",width:"80%"}),e(l,{label:"成绩",prop:"total",width:"80%"}),e(l,{align:"right",width:"auto"},{header:s(()=>[e(O,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value=o),size:"small",placeholder:"输入学号搜索试卷!"},null,8,["modelValue"])]),default:s(o=>[e(g,{size:"small",onClick:F=>T(o.$index,o.row)},{default:s(()=>a[3]||(a[3]=[C(" 修改 ")])),_:2},1032,["onClick"]),e(g,{size:"small",type:"danger",onClick:F=>j(o.$index,o.row)},{default:s(()=>a[4]||(a[4]=[C(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e(A,{background:"",layout:"prev, pager, next",total:p.value,"current-page":n.value,"page-size":k.value,onCurrentChange:V,onPrevClick:B,onNextClick:D},null,8,["total","current-page","page-size"])])])}}},he=H(ce,[["__scopeId","data-v-4e3e93a7"]]);export{he as default};

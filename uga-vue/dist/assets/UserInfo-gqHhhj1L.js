import{_ as M,u as H,H as J,r as b,a as V,x as K,o as W,w as q,c as P,b as Q,d as y,e as l,D as v,f as t,I as X,G as _,l as g,j as Y,i as Z,J as h,F as ee,K as le,z as oe,L as te,M as ae,q as i,t as ue}from"./index-zc-GuOi9.js";/* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css               *//* empty css                 */const se={class:"conatainer"},re={class:"content"},ne={class:"user-course"},de={class:"dialog-footer"},I="140px",ie={__name:"UserInfo",setup(me){const n=H(),f=J(),U=b(),a=V(n.userInfo),p=b(!1),x=b("add"),k=b("创建课程"),d=V({course_name:"",stu_count:"",submit_count:""}),E=V({0:"管理员",1:"普通用户"}),z=V({nickname:[{required:!0,message:"请输入姓名!",trigger:"blur"},{min:1,max:15,message:"姓名长度2~15个!",trigger:"blur"}],sex:[{required:!0,message:"请选择性别!",trigger:"change"}],school:[{required:!0,message:"请输入学校!",trigger:"blur"},{min:2,max:25,message:"学校名称长度2~25个!",trigger:"blur"}],profession:[{required:!0,message:"请输入专业!",trigger:"blur"},{min:2,max:25,message:"专业名称长度2~25个!",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号!",trigger:"blur"},{min:11,max:11,message:"手机号长度必须为11位!",trigger:"blur"}],desc:[{required:!0,message:"请输入描述信息",trigger:"blur"}]}),F=V([{}]),w=b(""),D=K(()=>F.filter(u=>!w.value||u.course_name.toLowerCase().includes(w.value.toLowerCase()))),L=(u,e)=>{x.value="edit",k.value="编辑课程",p.value=!0,Object.assign(d,e)};async function S(){await n.editCourse(d),await n.getCourse(),p.value=!1,x.value="add",k.value="创建课程"}async function T(u,e){await n.deleteCourse(e),F.splice(u,1)}async function j(){await n.addCourse(d),await n.getCourse(),p.value=!1}const B=async u=>{u&&await u.validate((e,s)=>{e?n.updateUserInfo({userInfo:a,role:f.role}):console.log("error submit!",s)})},R=u=>{u&&u.resetFields()};return W(()=>{n.getCourse()}),q(n.userInfo,u=>{Object.assign(a,u)}),q(n.courseList,u=>{Object.assign(F,u)}),(u,e)=>{const s=oe,r=le,c=ae,A=te,m=Z,$=X,C=ue,N=Y,O=h;return Q(),P(ee,null,[y("div",se,[y("div",re,[l($,{ref_key:"ruleFormRef",ref:U,style:{"max-width":"600px"},model:a,rules:z,"label-width":"auto",class:"demo-ruleForm",size:"default","status-icon":""},{default:t(()=>[l(r,{label:"用户类型",prop:"name"},{default:t(()=>[l(s,{modelValue:E[g(f).role],"onUpdate:modelValue":e[0]||(e[0]=o=>E[g(f).role]=o),disabled:""},null,8,["modelValue"])]),_:1}),l(r,{label:"姓名",prop:"name"},{default:t(()=>[l(s,{modelValue:a.nickname,"onUpdate:modelValue":e[1]||(e[1]=o=>a.nickname=o)},null,8,["modelValue"])]),_:1}),l(r,{label:"性别",prop:"sex"},{default:t(()=>[l(A,{modelValue:a.sex,"onUpdate:modelValue":e[2]||(e[2]=o=>a.sex=o)},{default:t(()=>[l(c,{value:"男"},{default:t(()=>e[19]||(e[19]=[i("男")])),_:1}),l(c,{value:"女"},{default:t(()=>e[20]||(e[20]=[i("女")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"年龄",prop:"age"},{default:t(()=>[l(s,{modelValue:a.age,"onUpdate:modelValue":e[3]||(e[3]=o=>a.age=o)},null,8,["modelValue"])]),_:1}),l(r,{label:"学校",prop:"school"},{default:t(()=>[l(s,{modelValue:a.school,"onUpdate:modelValue":e[4]||(e[4]=o=>a.school=o)},null,8,["modelValue"])]),_:1}),v(l(r,{label:"专业",prop:"profession"},{default:t(()=>[l(s,{modelValue:a.profession,"onUpdate:modelValue":e[5]||(e[5]=o=>a.profession=o)},null,8,["modelValue"])]),_:1},512),[[_,g(f).role==1]]),l(r,{label:"手机",prop:"phone"},{default:t(()=>[l(s,{modelValue:a.phone,"onUpdate:modelValue":e[6]||(e[6]=o=>a.phone=o),disabled:""},null,8,["modelValue"])]),_:1}),l(r,{label:"邮件",prop:"email"},{default:t(()=>[l(s,{modelValue:a.email,"onUpdate:modelValue":e[7]||(e[7]=o=>a.email=o),disabled:!0},null,8,["modelValue"])]),_:1}),l(r,{label:"地址",prop:"address"},{default:t(()=>[l(s,{modelValue:a.address,"onUpdate:modelValue":e[8]||(e[8]=o=>a.address=o)},null,8,["modelValue"])]),_:1}),v(l(r,{label:"个人简介:"},{default:t(()=>[l(s,{modelValue:a.desc,"onUpdate:modelValue":e[9]||(e[9]=o=>a.desc=o),type:"textarea",size:"large",rows:4},null,8,["modelValue"])]),_:1},512),[[_,g(f).role==1]]),l(r,{class:"bnt"},{default:t(()=>[l(m,{type:"primary",onClick:e[10]||(e[10]=o=>B(U.value))},{default:t(()=>e[21]||(e[21]=[i(" 提交更改 ")])),_:1}),l(m,{onClick:e[11]||(e[11]=o=>R(U.value))},{default:t(()=>e[22]||(e[22]=[i("取消")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),v(y("div",ne,[l(N,{data:g(D),style:{width:"100%"},"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"}},{default:t(()=>[l(C,{label:"课程名称",prop:"course_name"}),l(C,{label:"学生人数",prop:"stu_count"}),l(C,{label:"批改人数",prop:"submit_count"}),l(C,{align:"right"},{header:t(()=>[l(s,{modelValue:w.value,"onUpdate:modelValue":e[12]||(e[12]=o=>w.value=o),size:"small",placeholder:"搜索我的课程"},null,8,["modelValue"])]),default:t(o=>[l(m,{size:"small",onClick:G=>L(o.$index,o.row)},{default:t(()=>e[23]||(e[23]=[i(" 编辑 ")])),_:2},1032,["onClick"]),l(m,{size:"small",type:"danger",onClick:G=>T(o.$index,o.row)},{default:t(()=>e[24]||(e[24]=[i(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(m,{plain:"",onClick:e[13]||(e[13]=o=>p.value=!0),style:{"margin-top":"30px"}},{default:t(()=>e[25]||(e[25]=[i(" 创建课程 ")])),_:1})],512),[[_,g(f).role==1]])]),l(O,{modelValue:p.value,"onUpdate:modelValue":e[18]||(e[18]=o=>p.value=o),title:k.value,width:"500"},{footer:t(()=>[y("div",de,[l(m,{onClick:e[17]||(e[17]=o=>p.value=!1)},{default:t(()=>e[26]||(e[26]=[i("取消")])),_:1}),v(l(m,{type:"primary",onClick:j},{default:t(()=>e[27]||(e[27]=[i(" 确认创建 ")])),_:1},512),[[_,x.value=="add"]]),v(l(m,{type:"primary",onClick:S},{default:t(()=>e[28]||(e[28]=[i(" 确认修改 ")])),_:1},512),[[_,x.value=="edit"]])])]),default:t(()=>[l($,{model:d},{default:t(()=>[l(r,{label:"课程名称","label-width":I},{default:t(()=>[l(s,{modelValue:d.course_name,"onUpdate:modelValue":e[14]||(e[14]=o=>d.course_name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(r,{label:"课程人数","label-width":I},{default:t(()=>[l(s,{modelValue:d.stu_count,"onUpdate:modelValue":e[15]||(e[15]=o=>d.stu_count=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(r,{label:"批改人数","label-width":I},{default:t(()=>[l(s,{modelValue:d.submit_count,"onUpdate:modelValue":e[16]||(e[16]=o=>d.submit_count=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}},_e=M(ie,[["__scopeId","data-v-f9e851e2"]]);export{_e as default};

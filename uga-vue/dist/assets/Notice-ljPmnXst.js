import{_ as Y,r as d,a as ee,x as te,o as le,c as g,b as m,d as a,e as l,f as o,i as oe,Z as ae,R as E,l as n,E as ne,j as se,y as ie,K as de,F as V,$ as ue,a0 as re,q as u,h as T,W as A,a1 as pe,m as D,n as ce,t as me,J as fe,L as ve,A as _e,a2 as I,a3 as ye,a4 as ge,a5 as be,a6 as we}from"./index-D9tbxnKJ.js";/* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";const Ve={class:"n-container"},xe={class:"n-left"},ke={class:"left-header"},Ce={class:"left-content"},Ne=["onClick"],Ee={class:"n-right"},Te={class:"right-header"},Be={class:"opt-type"},he={class:"data"},Fe={class:"dialog-footer"},Ue={class:"dialog-footer"},B="140px",$e={__name:"Notice",setup(ze){const x=d("");d("");const f=d(!1),v=d(!1),r=d(1),h=d(10),k=d(0),s=ee({title:"",type:"",content:""}),b=d([]),F=te(()=>b.value),U=d([]),M=async()=>{await we(s),C(),v.value=!1};async function R(){await be(s),_(),f.value=!1}async function _(){const i=await ue({pageSize:h.value,currentPage:r.value});U.value=i.data,k.value=i.total}async function C(){const i=await re();b.value=i}const W=i=>{r.value=i,_()},j=()=>{r.value>1&&(r.value--,_())},q=()=>{r.value<k.value&&(r.value++,_())};function J(){K(),f.value=!0}const K=()=>{s.title="",s.content="",s.type=""},O=i=>{I.confirm("是否要删除此条公告?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await ge(i),_()})},Z=i=>{I.confirm("是否要删除此条公告类型?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await ye(i),C()})};return le(()=>{_(),C()}),(i,e)=>{const p=oe,G=pe,H=ae,$=ce,z=ne,c=me,Q=se,X=ie,N=_e,w=ve,L=fe,P=de;return m(),g(V,null,[a("div",Ve,[a("div",xe,[a("div",ke,[e[11]||(e[11]=a("div",{class:"n-title"},[a("div",{class:"n-label"}),a("div",{class:"n-font"},[a("strong",null,"公告分类")])],-1)),l(p,{type:"primary",plain:"",onClick:e[0]||(e[0]=t=>v.value=!0)},{default:o(()=>e[10]||(e[10]=[u("增加分类")])),_:1})]),a("div",Ce,[l(H,{style:{"max-width":"480px","background-color":"transparent"},shadow:"hover"},{header:o(()=>e[12]||(e[12]=[a("div",{class:"card-header"},[a("span",null,"全部")],-1)])),default:o(()=>[(m(!0),g(V,null,T(n(b),(t,y)=>(m(),g("p",{key:y,class:"text-item",onClick:S=>Z(t)},[u(A(t.name)+" ",1),l(G)],8,Ne))),128))]),_:1})])]),a("div",Ee,[a("div",Te,[e[14]||(e[14]=a("div",{class:"n-title"},[a("div",{class:"n-label"}),a("div",{class:"n-font"},[a("strong",null,"公告列表")])],-1)),a("div",Be,[l(z,{modelValue:n(x),"onUpdate:modelValue":e[1]||(e[1]=t=>E(x)?x.value=t:null),placeholder:"选择公告类型",size:"large",style:{width:"240px"}},{default:o(()=>[(m(!0),g(V,null,T(F.value,t=>(m(),D($,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),l(p,{type:"primary",plain:"",onClick:J},{default:o(()=>e[13]||(e[13]=[u("发布公告")])),_:1})]),a("div",he,[l(Q,{data:n(U),style:{width:"100%"},"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"}},{default:o(()=>[l(c,{label:"序号",type:"index",width:"100%"}),l(c,{label:"公告标题",prop:"title",width:"280%"}),l(c,{label:"发布人",prop:"username",width:"100%"}),l(c,{label:"发布类型",prop:"type",width:"100%"},{default:o(t=>{var y;return[a("span",null,A((y=n(b).find(S=>S.id==t.row.type))==null?void 0:y.name),1)]}),_:1}),l(c,{label:"发布时间",prop:"create_time",width:"150%"}),l(c,{label:"发布内容",prop:"content",width:"auto"}),l(c,{label:"操作"},{default:o(t=>[l(p,{type:"danger",onClick:y=>O(t.row)},{default:o(()=>e[15]||(e[15]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(X,{background:"",layout:"prev, pager, next",total:n(k),"current-page":n(r),"page-size":n(h),onCurrentChange:W,onPrevClick:j,onNextClick:q},null,8,["total","current-page","page-size"])])]),l(P,{modelValue:n(f),"onUpdate:modelValue":e[6]||(e[6]=t=>E(f)?f.value=t:null),title:"发布公告",width:"500"},{footer:o(()=>[a("div",Fe,[l(p,{onClick:e[5]||(e[5]=t=>f.value=!1)},{default:o(()=>e[16]||(e[16]=[u("取消")])),_:1}),l(p,{type:"primary",onClick:R},{default:o(()=>e[17]||(e[17]=[u(" 发布 ")])),_:1})])]),default:o(()=>[l(L,{model:n(s)},{default:o(()=>[l(w,{label:"公告标题","label-width":B},{default:o(()=>[l(N,{modelValue:n(s).title,"onUpdate:modelValue":e[2]||(e[2]=t=>n(s).title=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(w,{label:"发布类型","label-width":B},{default:o(()=>[l(z,{modelValue:n(s).type,"onUpdate:modelValue":e[3]||(e[3]=t=>n(s).type=t),placeholder:"选择发布类型"},{default:o(()=>[(m(!0),g(V,null,T(F.value,t=>(m(),D($,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(w,{label:"详细内容"},{default:o(()=>[l(N,{modelValue:n(s).content,"onUpdate:modelValue":e[4]||(e[4]=t=>n(s).content=t),type:"textarea",rows:6},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(P,{modelValue:n(v),"onUpdate:modelValue":e[9]||(e[9]=t=>E(v)?v.value=t:null),title:"添加公告类型",width:"500"},{footer:o(()=>[a("div",Ue,[l(p,{onClick:e[8]||(e[8]=t=>v.value=!1)},{default:o(()=>e[18]||(e[18]=[u("取消")])),_:1}),l(p,{type:"primary",onClick:M},{default:o(()=>e[19]||(e[19]=[u(" 添加 ")])),_:1})])]),default:o(()=>[l(L,{model:n(s)},{default:o(()=>[l(w,{label:"公告类型","label-width":B},{default:o(()=>[l(N,{modelValue:n(s).type,"onUpdate:modelValue":e[7]||(e[7]=t=>n(s).type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}},Re=Y($e,[["__scopeId","data-v-0788dded"]]);export{Re as default};
